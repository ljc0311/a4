# Edge-TTSé…éŸ³ç”Ÿæˆä¿®å¤æ€»ç»“

## é—®é¢˜æè¿°
ç”¨æˆ·åœ¨ä½¿ç”¨é…éŸ³ç”ŸæˆåŠŸèƒ½æ—¶é‡åˆ°é”™è¯¯ï¼š
```
Edge-TTSç”Ÿæˆå¤±è´¥: 'SubMaker' object has no attribute 'feed'
```

## é—®é¢˜æ ¹æº
è¿™æ˜¯Edge-TTSç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜ï¼š
- å½“å‰å®‰è£…çš„Edge-TTSç‰ˆæœ¬ï¼š7.0.2
- åŸä»£ç ä½¿ç”¨äº†æ—§ç‰ˆæœ¬çš„`SubMaker.feed()`æ–¹æ³•
- åœ¨Edge-TTS 7.0+ç‰ˆæœ¬ä¸­ï¼Œ`SubMaker`çš„APIå‘ç”Ÿäº†å˜åŒ–ï¼Œ`feed()`æ–¹æ³•è¢«ç§»é™¤æˆ–ä¿®æ”¹

## è§£å†³æ–¹æ¡ˆ
ä¿®æ”¹äº†`src/services/tts_engine_service.py`ä¸­çš„`EdgeTTSEngine.generate_speech()`æ–¹æ³•ï¼š

### 1. ç§»é™¤SubMakerä¾èµ–
- åˆ é™¤äº†`SubMaker`çš„ä½¿ç”¨
- ç®€åŒ–äº†éŸ³é¢‘ç”Ÿæˆæµç¨‹
- æš‚æ—¶è·³è¿‡å­—å¹•ç”Ÿæˆä»¥é¿å…å…¼å®¹æ€§é—®é¢˜

### 2. ä¿®å¤è·¯å¾„å¤„ç†
- æ”¹è¿›äº†è¾“å‡ºç›®å½•åˆ›å»ºé€»è¾‘
- é¿å…ç©ºè·¯å¾„å¯¼è‡´çš„ç³»ç»Ÿé”™è¯¯

### 3. ç®€åŒ–çš„å®ç°
```python
# ğŸ”§ ä¿®å¤ï¼šç®€åŒ–Edge-TTSè°ƒç”¨ï¼Œé¿å…SubMakerå…¼å®¹æ€§é—®é¢˜
communicate = edge_tts.Communicate(text, voice, rate=rate_str, pitch=pitch_str)

# åªç”ŸæˆéŸ³é¢‘ï¼Œæš‚æ—¶è·³è¿‡å­—å¹•ç”Ÿæˆä»¥é¿å…å…¼å®¹æ€§é—®é¢˜
with open(output_path, "wb") as file:
    async for chunk in communicate.stream():
        if chunk["type"] == "audio" and "data" in chunk:
            file.write(chunk["data"])

# æ£€æŸ¥æ–‡ä»¶æ˜¯å¦æˆåŠŸç”Ÿæˆ
if not os.path.exists(output_path) or os.path.getsize(output_path) == 0:
    raise Exception("éŸ³é¢‘æ–‡ä»¶ç”Ÿæˆå¤±è´¥æˆ–ä¸ºç©º")
```

## æµ‹è¯•éªŒè¯
åˆ›å»ºäº†`test_edge_tts_fix.py`æµ‹è¯•è„šæœ¬ï¼ŒéªŒè¯ç»“æœï¼š

```
=== æµ‹è¯•ç»“æœ ===
âœ… é…éŸ³ç”ŸæˆæˆåŠŸï¼
æ–‡ä»¶å¤§å°: 32688 å­—èŠ‚

æµ‹è¯•éŸ³è‰² 1: äº‘å¸Œ-ç”·å£° (zh-CN-YunxiNeural) âœ…
æµ‹è¯•éŸ³è‰² 2: æ™“æ™“-å¥³å£° (zh-CN-XiaoxiaoNeural) âœ…  
æµ‹è¯•éŸ³è‰² 3: äº‘æ‰¬-ç”·å£° (zh-CN-YunyangNeural) âœ…
```

## å½±å“èŒƒå›´
- âœ… ä¿®å¤äº†Edge-TTSé…éŸ³ç”Ÿæˆå¤±è´¥çš„é—®é¢˜
- âœ… æ”¯æŒå¤šç§ä¸­æ–‡éŸ³è‰²
- âœ… ä¿æŒäº†åŸæœ‰çš„APIæ¥å£ä¸å˜
- âš ï¸ æš‚æ—¶ç¦ç”¨äº†å­—å¹•ç”ŸæˆåŠŸèƒ½ï¼ˆå¯åœ¨åç»­ç‰ˆæœ¬ä¸­é‡æ–°å®ç°ï¼‰

## å…¼å®¹æ€§
- âœ… å…¼å®¹Edge-TTS 7.0+ç‰ˆæœ¬
- âœ… å‘åå…¼å®¹ç°æœ‰é¡¹ç›®
- âœ… ä¸å½±å“å…¶ä»–TTSå¼•æ“ï¼ˆCosyVoiceã€Azureç­‰ï¼‰

## åç»­ä¼˜åŒ–å»ºè®®
1. å¯ä»¥åœ¨æœªæ¥ç‰ˆæœ¬ä¸­é‡æ–°å®ç°å­—å¹•ç”ŸæˆåŠŸèƒ½
2. è€ƒè™‘æ·»åŠ æ›´å¤šEdge-TTSéŸ³è‰²é€‰é¡¹
3. ä¼˜åŒ–é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶

ä¿®å¤å®Œæˆæ—¶é—´ï¼š2025å¹´1æœˆ27æ—¥